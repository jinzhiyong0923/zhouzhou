<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>ä¸€ä»½ä¸ºä½ å®šåˆ¶çš„æ˜Ÿå…‰ä¹‹æ—… V10 (Final Clean)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;700&family=ZCOOL+XiaoWei&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <style>
        :root {
            --primary-color: #ff8fab;
            --secondary-color: #f8a5c2;
            --accent-color: #e57373;
            --text-color: #5d5d5d;
            --text-light: #ffffff;
            --text-title: #333;
            --bg-main: #fffcf7;
            --bg-secondary: #fdf6f8;
            --shadow-color: rgba(184, 98, 122, 0.15);
            --nav-bg: rgba(255, 252, 247, 0.85);
            --nav-scrolled-bg: rgba(255, 252, 247, 0.95);
            --gradient: linear-gradient(135deg, #ffdde1, #ee9ca7);
            --progress-bar-bg: #e0c5cd;
            --font-handwritten: 'ZCOOL XiaoWei', cursive;
        }

        body.dark-theme {
            --primary-color: #bb86fc;
            --secondary-color: #3700b3;
            --accent-color: #03dac6;
            --text-color: #e0e0e0;
            --text-light: #ffffff;
            --text-title: #f0f0f0;
            --bg-main: #121212;
            --bg-secondary: #1e1e1e;
            --shadow-color: rgba(0, 0, 0, 0.25);
            --nav-bg: rgba(30, 30, 30, 0.85);
            --nav-scrolled-bg: rgba(30, 30, 30, 0.95);
            --gradient: linear-gradient(135deg, #232526, #414345);
            --progress-bar-bg: #444;
        }

        .loader-wrapper{
            position: fixed;
            left: 0;
            top: 0;
            z-index: 9999;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: linear-gradient(45deg,rgb(90,54,148) 0%,rgb(19,189,206) 33%,rgb(0,148,217) 66%,rgb(111,199,181) 100%);
            background-size: 400%;
            background-position: 0% 100%;
            animation: gradient 7.5s ease-in-out infinite;
            opacity: 1;
            visibility: visible;
            transition: opacity 0.8s ease, visibility 0.8s ease;
        }
        .loader-wrapper.fade-out {
            opacity: 0;
            visibility: hidden;
        }
        .loader{
            width: 150px;
            height: 150px;
            border: 3px solid transparent;
            border-top-color: #fff;
            position: relative;
            left: 50%;
            top: 50%;
            margin-left: -75px;
            margin-top: -75px;
            z-index: 2;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            animation: spin 1.7s linear infinite;
        }
        .loader::before{
            content: "";
            position: absolute;
            top: 5px;
            left: 5px;
            bottom: 5px;
            right: 5px;
            border-radius: 50%;
            border: 3px solid transparent;
            border-top-color: #fff;
            animation: spin 0.6s linear infinite reverse;
        }
        .loader::after{
            content: "";
            position: absolute;
            top: 15px;
            left: 15px;
            bottom: 15px;
            right: 15px;
            border-radius: 50%;
            border: 3px solid transparent;
            border-top-color: #fff;
            animation: spin 1s linear infinite;
        }
        .loader img{
            width: 55%;
            height: 55%;
            object-fit: cover;
            border-radius: 50%;
            animation: spin 1.7s linear infinite reverse;
        }
        .loader-text{
            width: 100%;
            max-width: 450px;
            height: 36px;
            position: absolute;
            top: 72%;
            left: 50%;
            transform: translateX(-50%);
            z-index: 3;
            user-select: none;
        }
        .loader-text div{
            width: 30px;
            height: 36px;
            color: #fff;
            font-size: 32px;
            font-weight: bold;
            font-family: Arial, sans-serif;
            margin: 0 5px;
            position: absolute;
            opacity: 0;
            transform: rotate(180deg);
            animation: move 2s linear infinite;
        }
        .loader-text div:nth-child(8)::before,
        .loader-text div:nth-child(9)::before,
        .loader-text div:nth-child(10)::before{
            content: "";
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #fff;
            position: absolute;
            left: 0;
            bottom: 0;
        }
        .loader-text div::after{
            content: "";
            width: 10px;
            height: 5px;
            border-radius: 50%;
            background-color: rgba(255,255,255,0.15);
            position: absolute;
            bottom: -40px;
            left: 50%;
            margin-left: -5px;
        }
        .loader-text div:nth-child(8)::after,
        .loader-text div:nth-child(9)::after,
        .loader-text div:nth-child(10)::after{
            left: 0;
            margin-left: 0;
        }
        .loader-text div:nth-child(2){ animation-delay: 0.2s; }
        .loader-text div:nth-child(3){ animation-delay: 0.4s; }
        .loader-text div:nth-child(4){ animation-delay: 0.6s; }
        .loader-text div:nth-child(5){ animation-delay: 0.8s; }
        .loader-text div:nth-child(6){ animation-delay: 1s; }
        .loader-text div:nth-child(7){ animation-delay: 1.2s; }
        .loader-text div:nth-child(8){ animation-delay: 1.4s; }
        .loader-text div:nth-child(9){ animation-delay: 1.6s; }
        .loader-text div:nth-child(10){ animation-delay: 1.8s; }

        @keyframes gradient { 50%{ background-position: 100% 0%; } }
        @keyframes spin { 0%{ transform: rotate(0); } 100%{ transform: rotate(360deg); } }
        @keyframes move {
            0%{ right: 0; opacity: 0; }
            35%{ right: 41%; opacity: 1; transform: rotate(0); }
            65%{ right: 59%; opacity: 1; transform: rotate(0); }
            100%{ right: 100%; transform: rotate(-180deg); }
        }

        html { scroll-behavior: smooth; }
        body { font-family: 'Noto Sans SC', sans-serif; color: var(--text-color); margin: 0; background-color: var(--bg-main); overflow: hidden; /* Hide scrollbars during load */ }
        .content-wrapper { max-width: 1100px; margin: 0 auto; padding: 0 20px; }
        .reveal { opacity: 0; transform: translateY(50px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .reveal.visible { opacity: 1; transform: translateY(0); }
        .handwritten { font-family: var(--font-handwritten); font-weight: 400; }
        .hero-section { height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; color: white; position: relative; overflow: hidden; }
        #particles-js { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background-size: 200% 200%; background-image: linear-gradient(135deg, #e3a6b5, #f8a5c2, #ff8fab, #e57373); animation: gradient-flow 15s ease-in-out infinite; }
        body.dark-theme #particles-js { background-image: linear-gradient(135deg, #1a1a2e, #2a2a4e, #1a1a2e, #3700b3); }
        @keyframes gradient-flow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .hero-title { font-family: var(--font-handwritten); font-size: 4.5em; margin: 0; z-index: 1; text-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        .hero-subtitle { font-size: 1.5em; margin-top: 15px; letter-spacing: 2px; z-index: 1; text-shadow: 0 1px 5px rgba(0,0,0,0.2);}
        .scroll-down-indicator { position: absolute; bottom: 30px; font-size: 2em; animation: bounce 2s infinite; color: white; z-index: 1; }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% { transform: translateY(0); } 40% { transform: translateY(-20px); } 60% { transform: translateY(-10px); } }

        .navbar { position: fixed; top: 0; left: 0; width: 100%; background: var(--nav-bg); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); box-shadow: 0 2px 10px var(--shadow-color); z-index: 1000; height: 65px; display: flex; justify-content: center; align-items: center; transition: all 0.4s ease; }
        .navbar.scrolled { height: 60px; background-color: var(--nav-scrolled-bg); box-shadow: 0 4px 15px var(--shadow-color); }
        .nav-links { display: flex; }
        .navbar a { color: var(--text-color); text-decoration: none; padding: 10px 18px; font-weight: bold; font-size: 1.05em; transition: color 0.3s, transform 0.3s; }
        .navbar a:hover, .navbar a.active { color: var(--primary-color); transform: translateY(-2px); }
        .menu-toggle, .close-menu { display: none; }
        .theme-switch-wrapper { display: flex; align-items: center; margin-left: 20px; }
        .theme-switch { display: inline-block; height: 34px; position: relative; width: 60px; }
        .theme-switch input { display:none; }
        .slider { background-color: #ccc; bottom: 0; cursor: pointer; left: 0; position: absolute; right: 0; top: 0; transition: .4s; }
        .slider:before { background-color: #fff; bottom: 4px; content: ""; height: 26px; left: 4px; position: absolute; transition: .4s; width: 26px; }
        input:checked + .slider { background-color: var(--primary-color); }
        input:checked + .slider:before { transform: translateX(26px); }
        .slider.round { border-radius: 34px; }
        .slider.round:before { border-radius: 50%; content: "â˜€ï¸"; line-height: 26px; text-align: center; font-size: 16px; color: #f8a5c2;}
        input:checked + .slider.round:before { content: "ğŸŒ™"; color: #1e1e1e;}

        .section { padding: 120px 0; position: relative; overflow: hidden; background-color: var(--bg-main); transition: background-color 0.5s; }
        .section-accent-bg { background-color: var(--bg-secondary); }
        .section-title { font-size: 2.5em; font-weight: 700; color: var(--text-title); margin-bottom: 70px; text-align: center; transition: color 0.5s; position:relative; }
        .section-title i { color: var(--primary-color); font-size: 0.8em; transition: color 0.5s; margin-right:15px; }
        .section-title .char { display: inline-block; opacity: 0; transform: translateY(20px); transition: opacity 0.5s, transform 0.5s; }

        .slideshow-container { max-width: 1000px; aspect-ratio: 16 / 9; margin: auto; position: relative; border-radius: 20px; overflow: hidden; box-shadow: 0 15px 40px var(--shadow-color); }
        .slide { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; transition: opacity 1s ease-in-out; }
        .slide img { width: 100%; height: 100%; object-fit: cover; }
        .slide.active { opacity: 1; z-index: 1; }
        .slide.active img { animation: kenburns 15s ease-out forwards; }
        @keyframes kenburns { from { transform: scale(1); } to { transform: scale(1.15); } }
        .slide-nav { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.3); border: none; border-radius: 50%; width: 50px; height: 50px; font-size: 1.5em; color: white; z-index: 10; cursor: pointer; transition: background-color 0.3s; display: flex; justify-content: center; align-items: center; }
        .slide-nav:hover { background: rgba(0,0,0,0.6); }
        .slide-prev { left: 15px; }
        .slide-next { right: 15px; }
        .thumbnail-container { display: flex; justify-content: center; gap: 10px; margin-top: 20px; flex-wrap: wrap; }
        .thumbnail { width: 80px; height: 60px; object-fit: cover; border-radius: 8px; opacity: 0.6; transition: all 0.3s; border: 2px solid transparent; cursor: pointer; }
        .thumbnail.active { opacity: 1; transform: scale(1.1); border-color: var(--primary-color); }

        .card-container { display: flex; justify-content: center; align-items: stretch; gap: 40px; flex-wrap: wrap; }
        .interactive-card, .flip-card-front, .flip-card-back { position: relative; overflow: hidden; }
        .interactive-card::before, .flip-card-front::before, .flip-card-back::before { content: ''; position: absolute; top: 0; left: -150%; width: 75%; height: 100%; background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 100%); transform: skewX(-25deg); transition: left 0.7s; }
        .interactive-card:hover::before, .flip-card:hover .flip-card-front::before, .flip-card:hover .flip-card-back::before { left: 150%; }
        body.dark-theme .interactive-card::before { background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0) 100%); }
        .interactive-card { background: var(--bg-main); border-radius: 20px; padding: 30px; width: 400px; text-align: center; box-shadow: 0 15px 40px var(--shadow-color); cursor: pointer; transition: transform 0.4s ease-out, box-shadow 0.3s; }
        .interactive-card:hover { transform: translateY(-15px); box-shadow: 0 25px 50px var(--shadow-color); }
        .card-image { width: 150px; height: 150px; border-radius: 50%; object-fit: cover; border: 5px solid var(--secondary-color); margin-bottom: 20px; }
        .card-title { font-size: 1.8em; font-weight: bold; margin-bottom: 10px; color: var(--primary-color); }
        .card-text { font-size: 1.1em; line-height: 1.6; color: var(--text-color); }
        .flip-card { background-color: transparent; width: 400px; height: 380px; perspective: 1000px; cursor: pointer; }
        .flip-card-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.8s; transform-style: preserve-3d; }
        .flip-card:hover .flip-card-inner { transform: rotateY(180deg); }
        .flip-card-front, .flip-card-back { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; border-radius: 20px; box-shadow: 0 15px 40px var(--shadow-color); display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 30px; box-sizing: border-box; }
        .flip-card-front { background: var(--gradient); color: white; }
        .flip-card-back { background: linear-gradient(135deg, #f7b733, #fc4a1a); color: white; transform: rotateY(180deg); }
        .flip-card .card-title { color: white; }
        .surprise-container { text-align: center; margin-top: 60px; }
        .surprise-btn { background: var(--primary-color); color: white; border: none; padding: 15px 30px; font-size: 1.2em; font-weight: bold; border-radius: 50px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 5px 15px var(--shadow-color); }
        .surprise-btn:hover { transform: translateY(-5px) scale(1.05); box-shadow: 0 10px 20px var(--shadow-color); }
        #confetti-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10000; }

        #carousel-section { perspective: 1500px; }
        .carousel-wrapper { position: relative; width: 100%; height: 400px; display: flex; justify-content: center; align-items: center; }
        .carousel-container-desktop { width: 250px; height: 250px; position: relative; transform-style: preserve-3d; transition: transform 1s cubic-bezier(0.77, 0, 0.175, 1); display: block; }
        .carousel-item { position: absolute; left: 0; top: 0; width: 100%; height: 100%; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 20px rgba(0,0,0,0.2); -webkit-box-reflect: below 15px linear-gradient(transparent, transparent, #0004); }
        .carousel-item img { width: 100%; height: 100%; object-fit: cover; }
        .carousel-nav { display: block; }
        .carousel-nav { position: absolute; top: 50%; transform: translateY(-50%); background: var(--bg-main); border: 1px solid var(--progress-bar-bg); border-radius: 50%; width: 45px; height: 45px; font-size: 1.2em; color: var(--primary-color); box-shadow: 0 5px 15px var(--shadow-color); cursor: pointer; z-index: 10; transition: all 0.3s; }
        .carousel-nav:hover { background: var(--primary-color); border-color: var(--primary-color); color: white; }
        #prev-carousel-btn { left: calc(50% - 300px); }
        #next-carousel-btn { right: calc(50% - 300px); }
        .carousel-grid-mobile { display: none; }

        .traits-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px; }
        .trait-card { background: var(--bg-main); border-radius: 15px; padding: 30px; box-shadow: 0 10px 30px var(--shadow-color); position: relative; overflow: hidden; transition: transform 0.3s; }
        .trait-card:hover { transform: translateY(-10px); }
        .trait-header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; }
        .trait-header i { font-size: 2em; color: var(--primary-color); }
        .trait-title { font-size: 1.4em; font-weight: bold; color: var(--text-title); margin: 0; }
        .progress-bar { width: 100%; height: 12px; background-color: var(--progress-bar-bg); border-radius: 6px; overflow: hidden; }
        .progress-bar-inner { width: 0; height: 100%; background: var(--gradient); border-radius: 6px; transition: width 1.5s cubic-bezier(0.25, 1, 0.5, 1); }
        .trait-card.visible .progress-bar-inner { width: var(--progress-level, 0%); }

        #music-section { background: var(--gradient); color: var(--text-light); }
        .cool-player-wrapper { background: rgba(255,255,255,0.1); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border-radius: 20px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: 1px solid rgba(255,255,255,0.2); }
        .cool-player { display: flex; align-items: center; gap: 30px; flex-wrap: wrap;}
        .album-art-container { width: 150px; height: 150px; position: relative; flex-shrink: 0; }
        .album-art { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; box-shadow: 0 5px 20px rgba(0,0,0,0.2); animation: spin 12s linear infinite; animation-play-state: paused; }
        .album-art.playing { animation-play-state: running; }
        .player-controls { flex-grow: 1; display: flex; flex-direction: column; align-items: center; color: var(--text-light); width: calc(100% - 180px); }
        #cool-song-title { font-size: 1.8em; font-weight: bold; text-shadow: 1px 1px 3px rgba(0,0,0,0.2); }
        #cool-song-artist { font-size: 1.1em; opacity: 0.8; }
        .buttons { display: flex; align-items: center; gap: 20px; margin: 15px 0; }
        .buttons button { background: none; border: 2px solid var(--text-light); color: var(--text-light); width: 50px; height: 50px; border-radius: 50%; font-size: 1.2em; transition: all 0.3s; display: flex; justify-content: center; align-items: center; cursor: pointer; }
        .buttons button:hover { background-color: rgba(255,255,255,0.2); transform: scale(1.1); }
        .buttons #play-pause-btn { width: 65px; height: 65px; font-size: 1.8em; }
        .progress-container { width: 100%; display: flex; align-items: center; gap: 10px; font-size: 0.9em; }
        #seek-bar { -webkit-appearance: none; appearance: none; width: 100%; height: 5px; background: rgba(255, 255, 255, 0.3); border-radius: 5px; outline: none; transition: all 0.2s; cursor: pointer; }
        #seek-bar::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 15px; height: 15px; background: white; border-radius: 50%; cursor: pointer; }
        .lyrics-container { margin-top: 25px; height: 120px; overflow: hidden; position: relative; width: 100%; }
        #lyrics-list { list-style: none; padding: 0; margin: 0; text-align: center; color: rgba(255, 255, 255, 0.6); transition: transform 0.5s ease-out; }
        #lyrics-list li { padding: 8px 0; font-size: 1.1em; transition: color 0.3s, font-size 0.3s, opacity 0.3s; opacity: 0.7; }
        #lyrics-list li.active { color: white; font-weight: bold; font-size: 1.3em; opacity: 1; }

        footer { background-color: var(--bg-secondary); color: #aaa; text-align: center; padding: 40px 20px; transition: all 0.5s;}
        .beat { color: var(--accent-color); animation: beat 1.2s infinite; }
        @keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }

        @media (max-width: 768px) {
            body { cursor: auto; }
            .content-wrapper { padding: 0 15px; }
            .hero-title { font-size: 2.8em; }
            .hero-subtitle { font-size: 1em; }
            .section { padding: 80px 0; }
            .section-title { font-size: 2em; margin-bottom: 50px; }
            .navbar { justify-content: space-between; padding: 0 20px; }
            .nav-links { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-main); flex-direction: column; justify-content: center; align-items: center; gap: 20px; transform: translateX(100%); transition: transform 0.3s ease-in-out; }
            .nav-links.active { display: flex; transform: translateX(0); }
            .navbar a { font-size: 1.5em; }
            .theme-switch-wrapper { position: absolute; bottom: 50px; left: 50%; transform: translateX(-50%); margin: 0; }
            .menu-toggle { display: block; background: none; border: none; color: var(--text-color); font-size: 1.8em; cursor: pointer; z-index: 1001; }
            .close-menu { display: block; position: absolute; top: 22px; right: 20px; background: none; border: none; color: var(--text-color); font-size: 2.2em; cursor: pointer;}
            .card-container { gap: 30px; }
            .flip-card, .interactive-card { width: 100%; max-width: 350px; margin: 0 auto; }
            .flip-card { height: 360px; }
            .carousel-container-desktop, .carousel-nav { display: none; }
            .carousel-grid-mobile { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
            .carousel-grid-mobile .carousel-item { position: static; box-shadow: 0 5px 15px var(--shadow-color); border-radius: 10px; aspect-ratio: 1 / 1; }
            .cool-player { flex-direction: column; text-align: center; }
            .player-controls { width: 100%; }
        }
    </style>
</head>
<body>

<div class="loader-wrapper">
    <div class="loader"><img src="img/ç´ é¾™.jpg" alt="Loading Logo"></div>
    <div class="loader-text">
        <div>J</div>
        <div>Z</div>
        <div>Y</div>
        <div>áƒ¦</div>
        <div>Z</div>
        <div>S</div>
        <div>H</div>
        <div></div>
        <div></div>
        <div></div>
    </div>
</div>

<audio id="bg-music" loop>
    <source src="music/é»‘çœ¼åœˆ-æ±ªè‹æ³·.mp3" type="audio/mpeg">
</audio>

<nav class="navbar">
    <div class="menu-toggle"><i class="fa-solid fa-bars"></i></div>
    <div class="nav-links">
        <button class="close-menu"><i class="fa-solid fa-xmark"></i></button>
        <a href="#home" class="nav-link active handwritten">é¦–é¡µ</a>
        <a href="#gallery" class="nav-link handwritten">æµå…‰å½±é›†</a>
        <a href="#for-her" class="nav-link handwritten">For My Love</a>
        <a href="#carousel-section" class="nav-link handwritten">3Dä¸“è¾‘å¢™</a>
        <a href="#traits-section" class="nav-link handwritten">æˆ‘ä»¬çš„çˆ±</a>
        <a href="#music-section" class="nav-link handwritten">éŸ³ä¹ç›’</a>
        <div class="theme-switch-wrapper">
            <label class="theme-switch" for="checkbox">
                <input type="checkbox" id="checkbox" />
                <div class="slider round"></div>
            </label>
        </div>
    </div>
</nav>

<header id="home" class="hero-section">
    <div id="particles-js"></div>
    <div class="content-wrapper">
        <h1 class="hero-title" data-value="ä¸€ä»½ä¸ºä½ å®šåˆ¶çš„æ˜Ÿå…‰ä¹‹æ—…">ä¸€ä»½ä¸ºä½ å®šåˆ¶çš„æ˜Ÿå…‰ä¹‹æ—…</h1>
        <p class="hero-subtitle">è‡´æˆ‘æœ€çˆ±çš„ [å‘¨å‘¨áƒ¦]</p>
    </div>
    <a href="#gallery" class="scroll-down-indicator"><i class="fa-solid fa-chevron-down"></i></a>
</header>

<section id="gallery" class="section section-light">
    <div class="content-wrapper">
        <h2 class="section-title reveal handwritten"><i class="fa-solid fa-images"></i>æµå…‰å½±é›†</h2>
        <div class="slideshow-container reveal">
            <div class="slide active"><img src="img/ç«–å›¾1.jpg" alt="çˆ±è®©ä¸€åˆ‡å¤æ´»"></div>
            <div class="slide"><img src="img/èˆå°.jpg" alt="èˆå°ç¬é—´"></div>
            <div class="slide"><img src="img/ç”Ÿæ´».jpg" alt="ç”Ÿæ´»è®°å½•"></div>
            <div class="slide"><img src="img/å¯çˆ±.jpg" alt="å¯çˆ±é€ å‹"></div>
            <div class="slide"><img src="img/æ‚å¿—.jpg" alt="æ‚å¿—å°é¢"></div>
            <div class="slide"><img src="img/ç«–å›¾2.jpg" alt="ä¾§é¢œæ€"></div>
            <button class="slide-nav slide-prev"><i class="fa-solid fa-arrow-left"></i></button>
            <button class="slide-nav slide-next"><i class="fa-solid fa-arrow-right"></i></button>
        </div>
        <div class="thumbnail-container reveal">
            <img src="img/ç«–å›¾1.jpg" class="thumbnail active" data-slide="0" alt="Thumbnail 1">
            <img src="img/èˆå°.jpg" class="thumbnail" data-slide="1" alt="Thumbnail 2">
            <img src="img/ç”Ÿæ´».jpg" class="thumbnail" data-slide="2" alt="Thumbnail 3">
            <img src="img/å¯çˆ±.jpg" class="thumbnail" data-slide="3" alt="Thumbnail 4">
            <img src="img/æ‚å¿—.jpg" class="thumbnail" data-slide="4" alt="Thumbnail 5">
            <img src="img/ç«–å›¾2.jpg" class="thumbnail" data-slide="5" alt="Thumbnail 6">
        </div>
    </div>
</section>

<section id="for-her" class="section section-accent-bg">
    <div class="content-wrapper">
        <h2 class="section-title reveal handwritten"><i class="fa-solid fa-gift"></i>For My Love</h2>
        <div class="card-container">
            <div class="flip-card reveal">
                <div class="flip-card-inner">
                    <div class="flip-card-front">
                        <img src="img/å‘¨å‘¨.jpg" alt="ç…§ç‰‡" class="card-image">
                        <h3 class="card-title handwritten">æˆ‘çš„å¥³å­© å‘¨å‘¨áƒ¦</h3>
                        <p class="card-text">(æ‚¬åœå¡ç‰‡æœ‰æƒŠå–œ)</p>
                    </div>
                    <div class="flip-card-back">
                        <h3 class="card-title handwritten">To: æˆ‘äº²çˆ±çš„å‘¨å‘¨áƒ¦</h3>
                        <p class="card-text handwritten">"å˜¿ï¼Œæˆ‘çš„å¥³å­©ã€‚ä¸ä½ åœ¨ä¸€èµ·çš„æ¯ä¸€å¤©ï¼Œéƒ½åƒæ˜¯ä»–æ­Œé‡Œå”±çš„é‚£æ ·ï¼Œå……æ»¡äº†é˜³å…‰å’Œç”œèœœã€‚è¿™ä»½å°ç¤¼ç‰©ï¼Œæ‰¿è½½ç€æˆ‘æ»¡æ»¡çš„çˆ±æ„ï¼Œå¸Œæœ›ä½ èƒ½å–œæ¬¢ã€‚"</p>
                    </div>
                </div>
            </div>
            <div class="interactive-card reveal">
                <img src="img/ç´ é¾™.jpg" alt="ç´ é¾™å¤´åƒ" class="card-image">
                <h3 class="card-title handwritten">å®‡å®™æœ€èŒ Â· ç´ é¾™</h3>
                <p class="card-text">ä»ä¸€ä¸ªå¯çˆ±çš„è°éŸ³æ¢—ï¼Œåˆ°ä¸€ä¸ªçœŸå®çš„å®è´ç©å¶ã€‚ç´ é¾™æ˜¯æˆ‘ä»¬çˆ±æƒ…é‡Œï¼Œé‚£ä¸ªå¿ƒç…§ä¸å®£çš„ç”œèœœæš—å·ï¼</p>
            </div>
        </div>
        <div class="surprise-container reveal">
            <button class="surprise-btn" id="confetti-btn"><i class="fa-solid fa-wand-magic-sparkles"></i> ç‚¹æˆ‘å¼€å¯æƒŠå–œ!</button>
        </div>
    </div>
</section>

<section id="carousel-section" class="section section-light">
    <div class="content-wrapper">
        <h2 class="section-title reveal handwritten"><i class="fa-solid fa-cubes"></i>3D å½±é›†å¢™</h2>
        <div class="carousel-wrapper reveal">
            <div class="carousel-container-desktop">
                <div class="carousel-item"><img src="img/8.jpg" alt="Album 1"></div>
                <div class="carousel-item"><img src="img/7.jpg" alt="Album 2"></div>
                <div class="carousel-item"><img src="img/6.jpg" alt="Album 3"></div>
                <div class="carousel-item"><img src="img/5.jpg" alt="Album 4"></div>
                <div class="carousel-item"><img src="img/4.jpg" alt="Album 5"></div>
                <div class="carousel-item"><img src="img/3.jpg" alt="Album 6"></div>
                <div class="carousel-item"><img src="img/2.jpg" alt="Album 7"></div>
                <div class="carousel-item"><img src="img/1.png" alt="Album 8"></div>
            </div>
            <button id="prev-carousel-btn" class="carousel-nav"><i class="fa-solid fa-chevron-left"></i></button>
            <button id="next-carousel-btn" class="carousel-nav"><i class="fa-solid fa-chevron-right"></i></button>

            <div class="carousel-grid-mobile">
                <div class="carousel-item"><img src="img/8.jpg" alt="Album 1"></div>
                <div class="carousel-item"><img src="img/7.jpg" alt="Album 2"></div>
                <div class="carousel-item"><img src="img/6.jpg" alt="Album 3"></div>
                <div class="carousel-item"><img src="img/5.jpg" alt="Album 4"></div>
                <div class="carousel-item"><img src="img/4.jpg" alt="Album 5"></div>
                <div class="carousel-item"><img src="img/3.jpg" alt="Album 6"></div>
                <div class="carousel-item"><img src="img/2.jpg" alt="Album 7"></div>
                <div class="carousel-item"><img src="img/1.png" alt="Album 8"></div>
            </div>
        </div>
    </div>
</section>

<section id="traits-section" class="section section-accent-bg">
    <div class="content-wrapper">
        <h2 class="section-title reveal handwritten"><i class="fa-solid fa-heart"></i>æˆ‘ä»¬çš„çˆ±</h2>
        <div class="traits-container reveal">
            <div class="trait-card" style="--progress-level: 100%;">
                <div class="trait-header"><i class="fa-solid fa-heart-pulse"></i><h3 class="trait-title">å¿ƒåŠ¨æŒ‡æ•°</h3></div>
                <div class="progress-bar"><div class="progress-bar-inner"></div></div>
            </div>
            <div class="trait-card" style="--progress-level: 100%;">
                <div class="trait-header"><i class="fa-solid fa-ice-cream"></i><h3 class="trait-title">ç”œèœœæŒ‡æ•°</h3></div>
                <div class="progress-bar"><div class="progress-bar-inner"></div></div>
            </div>
            <div class="trait-card" style="--progress-level: 100%;">
                <div class="trait-header"><i class="fa-solid fa-link"></i><h3 class="trait-title">é»˜å¥‘åŒæ­¥ç‡</h3></div>
                <div class="progress-bar"><div class="progress-bar-inner"></div></div>
            </div>
        </div>
    </div>
</section>

<section id="music-section" class="section">
    <div class="content-wrapper">
        <div class="reveal">
            <h2 class="section-title handwritten"><i class="fa-solid fa-compact-disc"></i>æ²‰æµ¸éŸ³ä¹ç›’</h2>
            <div class="cool-player-wrapper">
                <div id="music-player">
                    <div class="cool-player">
                        <div class="album-art-container">
                            <img src="img/ä¸€ç¬‘å€¾åŸ-æ±ªè‹æ³·.jpg" alt="Album Art" id="album-art-img" class="album-art">
                        </div>
                        <div class="player-controls">
                            <div class="song-info">
                                <div id="cool-song-title">é€‰æ‹©ä¸€é¦–æ­Œ</div>
                                <div id="cool-song-artist">æ±ªè‹æ³·</div>
                            </div>
                            <div class="progress-container">
                                <span id="current-time">0:00</span>
                                <input type="range" id="seek-bar" value="0" step="1">
                                <span id="duration">0:00</span>
                            </div>
                            <div class="buttons">
                                <button id="prev-btn"><i class="fa-solid fa-backward-step"></i></button>
                                <button id="play-pause-btn"><i class="fa-solid fa-play"></i></button>
                                <button id="next-btn"><i class="fa-solid fa-forward-step"></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="lyrics-container">
                        <ul id="lyrics-list"></ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<footer>
    <div class="content-wrapper">
        <p class="handwritten">A Lifetime of Love for [å‘¨å‘¨áƒ¦]</p>
        <p>Made with <i class="fa-solid fa-heart beat"></i> by ä½ çš„å®å®</p>
        <p>&copy; 2025å¹´7æœˆ15æ—¥</p>
    </div>
</footer>

<canvas id="confetti-canvas"></canvas>
<audio id="audio-player" crossOrigin="anonymous"></audio>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
<script>
    !function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.particlesJS=t()}(this,function(){var e=function(t,i){this.pJS={canvas:{el:t,w:t.offsetWidth,h:t.offsetHeight},particles:{number:{value:40,density:{enable:!0,value_area:800}},color:{value:"#fff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#fff",opacity:.4,width:1},move:{enable:!0,speed:6,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}},array:[]},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"repulse"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}},mouse:{}},retina_detect:!1,fn:{interact:{},modes:{},vendors:{}},tmp:{}};var n=this.pJS;i&&Object.deepExtend(n,i),n.fn.vendors.eventsListeners=function(){"canvas"==n.interactivity.detect_on?n.interactivity.el=n.canvas.el:n.interactivity.el=window,("window"==n.interactivity.detect_on||"document"==n.interactivity.detect_on)&&(n.interactivity.el.addEventListener("mousemove",function(e){if(n.interactivity.el==window){var t=e.clientX,i=e.clientY}else{var t=e.offsetX||e.clientX,i=e.offsetY||e.clientY}n.interactivity.mouse.pos_x=t,n.interactivity.mouse.pos_y=i,n.tmp.retina&&(n.interactivity.mouse.pos_x*=n.canvas.pxratio,n.interactivity.mouse.pos_y*=n.canvas.pxratio),n.interactivity.status="mousemove"}),n.interactivity.el.addEventListener("mouseleave",function(e){n.interactivity.mouse.pos_x=null,n.interactivity.mouse.pos_y=null,n.interactivity.status="mouseleave"})),n.interactivity.events.onclick.enable&&n.interactivity.el.addEventListener("click",function(){if(n.interactivity.mouse.click_pos_x=n.interactivity.mouse.pos_x,n.interactivity.mouse.click_pos_y=n.interactivity.mouse.pos_y,n.interactivity.mouse.click_time=Date.now(),n.interactivity.events.onclick.enable){switch(n.interactivity.events.onclick.mode){case"push":n.particles.move.enable||1==n.interactivity.modes.push.particles_nb?n.fn.modes.pushParticles(n.interactivity.modes.push.particles_nb,n.interactivity.mouse):n.interactivity.modes.push.particles_nb>1&&n.fn.modes.pushParticles(n.interactivity.modes.push.particles_nb);break;case"remove":n.fn.modes.removeParticles(n.interactivity.modes.remove.particles_nb);break;case"bubble":n.tmp.bubble_clicking=!0;break;case"repulse":n.tmp.repulse_clicking=!0,n.tmp.repulse_count=0,n.tmp.repulse_finish=!1,setTimeout(function(){n.tmp.repulse_clicking=!1},1e3*n.interactivity.modes.repulse.duration)}}})},n.fn.vendors.densityAutoParticles=function(){if(n.particles.number.density.enable){var e=n.canvas.el.width*n.canvas.el.height/1e3;n.tmp.retina&&(e/=n.canvas.pxratio*2);var t=e*n.particles.number.value/n.particles.number.density.value_area,i=n.particles.array.length-t;i<0?n.fn.modes.pushParticles(Math.abs(i)):n.fn.modes.removeParticles(i)}},n.fn.vendors.checkOverlap=function(e,t){for(var i=0;i<n.particles.array.length;i++){var s=n.particles.array[i],a=e.x-s.x,r=e.y-s.y,o=Math.sqrt(a*a+r*r);o<=e.radius+s.radius&&(e.x=t?t.x:Math.random()*n.canvas.w,e.y=t?t.y:Math.random()*n.canvas.h,n.fn.vendors.checkOverlap(e))}},n.fn.vendors.createSvgImg=function(e){var t=n.tmp.source_svg,i=/#([0-9A-F]{3,6})/i.exec(e.color.value);i&&(e.color.rgb={r:parseInt(i[1].length>3?i[1].substring(0,2):i[1].substring(0,1).repeat(2),16),g:parseInt(i[1].length>3?i[1].substring(2,4):i[1].substring(1,2).repeat(2),16),b:parseInt(i[1].length>3?i[1].substring(4,6):i[1].substring(2,3).repeat(2),16)});var s='<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(e.size.value,'" height="').concat(e.size.value,'" viewBox="0 0 ').concat(e.size.value," ").concat(e.size.value,'" fill="rgb(').concat(e.color.rgb.r,",").concat(e.color.rgb.g,",").concat(e.color.rgb.b,')">').concat(t,"</svg>"),a=new Blob([s],{type:"image/svg+xml;charset=utf-8"}),r=window.URL||window.webkitURL||window,o=r.createObjectURL(a);e.img={src:o,ratio:e.size.value/100,loaded:!1},r.revokeObjectURL(o)},n.fn.vendors.destroypJS=function(){cancelAnimationFrame(n.fn.drawAnimFrame),n.canvas.el.remove(),pJSDom=null},n.fn.vendors.draw=function(){n.fn.canvasClear(),n.fn.particlesDraw()},n.fn.vendors.checkBeforeDraw=function(){n.fn.vendors.init(),n.fn.vendors.draw()},n.fn.vendors.init=function(){n.fn.retinaInit(),n.fn.canvasInit(),n.fn.canvasSize(),n.fn.particlesCreate(),n.fn.vendors.densityAutoParticles(),n.particles.line_linked.color_rgb_line=hexToRgb(n.particles.line_linked.color)},n.fn.vendors.start=function(){n.fn.vendors.eventsListeners(),n.fn.vendors.drawloop()},n.fn.drawAnimFrame=null,n.fn.vendors.drawloop=function(){n.fn.drawAnimFrame=requestAnimFrame(n.fn.vendors.drawloop),n.fn.vendors.draw()},n.fn.retinaInit=function(){n.retina_detect&&window.devicePixelRatio>1?(n.canvas.pxratio=window.devicePixelRatio,n.tmp.retina=!0):(n.canvas.pxratio=1,n.tmp.retina=!1),n.canvas.w=n.canvas.el.offsetWidth*n.canvas.pxratio,n.canvas.h=n.canvas.el.offsetHeight*n.canvas.pxratio,n.particles.size.value=n.tmp.obj.size_value,n.particles.size.anim.speed=n.tmp.obj.size_anim_speed,n.particles.move.speed=n.tmp.obj.move_speed,n.particles.line_linked.distance=n.tmp.obj.line_linked_distance,n.particles.line_linked.width=n.tmp.obj.line_linked_width,n.particles.opacity.value=n.tmp.obj.opacity_value,n.particles.opacity.anim.speed=n.tmp.obj.opacity_anim_speed},n.fn.canvasInit=function(){n.canvas.ctx=n.canvas.el.getContext("2d")},n.fn.canvasSize=function(){n.canvas.el.width=n.canvas.w,n.canvas.el.height=n.canvas.h,n&&n.interactivity.events.resize&&window.addEventListener("resize",function(){n.canvas.w=n.canvas.el.offsetWidth,n.canvas.h=n.canvas.el.offsetHeight,n.tmp.retina&&(n.canvas.w*=n.canvas.pxratio,n.canvas.h*=n.canvas.pxratio),n.canvas.el.width=n.canvas.w,n.canvas.el.height=n.canvas.h,n.particles.move.out_mode||n.fn.vendors.densityAutoParticles(),n.particles.shape.type instanceof Array||"image"==n.particles.shape.type||n.fn.vendors.createSvgImg(n.particles.array[0])})},n.fn.canvasClear=function(){n.canvas.ctx.clearRect(0,0,n.canvas.w,n.canvas.h)},n.fn.particle=function(e,t,i){this.radius=(n.particles.size.random?Math.random():1)*n.particles.size.value,n.particles.size.anim.enable&&(this.size_status="increase",this.vs=n.particles.size.anim.speed/100,n.tmp.retina||(this.vs/=n.canvas.pxratio)),this.x=i?i.x:Math.random()*n.canvas.w,this.y=i?i.y:Math.random()*n.canvas.h,this.x>n.canvas.w-2*this.radius?this.x=n.canvas.w-2*this.radius:this.x<2*this.radius&&(this.x=2*this.radius),this.y>n.canvas.h-2*this.radius?this.y=n.canvas.h-2*this.radius:this.y<2*this.radius&&(this.y=2*this.radius),n.particles.move.bounce&&n.fn.vendors.checkOverlap(this,i),this.color={},"object"==typeof e.value?e.value instanceof Array?this.color.rgb=hexToRgb(e.value[Math.floor(Math.random()*n.particles.color.value.length)]):(null!=e.value.r&&null!=e.value.g&&null!=e.value.b&&(this.color.rgb={r:e.value.r,g:e.value.g,b:e.value.b}),null!=e.value.h&&null!=e.value.s&&null!=e.value.l&&(this.color.hsl=e.value)):e.value instanceof Array?this.color.rgb=hexToRgb(e.value[Math.floor(Math.random()*n.particles.color.value.length)]):"random"==e.value?this.color.rgb={r:Math.floor(256*Math.random())+0,g:Math.floor(256*Math.random())+0,b:Math.floor(256*Math.random())+0}:"string"==typeof e.value&&(this.color=e,this.color.rgb=hexToRgb(this.color.value)),this.opacity=(n.particles.opacity.random?Math.random():1)*n.particles.opacity.value,n.particles.opacity.anim.enable&&(this.opacity_status="increase",this.vo=n.particles.opacity.anim.speed/100,n.tmp.retina||(this.vo/=n.canvas.pxratio));var s=n.particles.move.direction,a=n.particles.move.straight;if(this.vx=n.particles.move.speed/2-Math.random()*n.particles.move.speed,this.vy=n.particles.move.speed/2-Math.random()*n.particles.move.speed,"top"==s?this.vy=-n.particles.move.speed/2:"top-right"==s?this.vx=n.particles.move.speed/2:"right"==s?this.vx=n.particles.move.speed/2:"bottom-right"==s?this.vy=n.particles.move.speed/2:"bottom"==s?this.vy=n.particles.move.speed/2:"bottom-left"==s?this.vx=-n.particles.move.speed/2:"left"==s?this.vx=-n.particles.move.speed/2:"top-left"==s&&(this.vx=-n.particles.move.speed/2),"random"==n.particles.move.direction&&(this.vx=(Math.random()-.5)*n.particles.move.speed,this.vy=(Math.random()-.5)*n.particles.move.speed),a){this.vx=Math.cos(Math.random()*Math.PI*2)*n.particles.move.speed,this.vy=Math.sin(Math.random()*Math.PI*2)*n.particles.move.speed}this.vx_i=this.vx,this.vy_i=this.vy;var r=n.particles.shape.type;if("object"==typeof r){if(r instanceof Array){var o=r[Math.floor(Math.random()*r.length)];this.shape=o}else this.shape=r}"image"==this.shape&&n.fn.vendors.createSvgImg(this),this.draw=function(){var e=this;if(null!=e.radius_bubble){var t=e.radius_bubble}else{var t=e.radius}if(null!=e.opacity_bubble){var i=e.opacity_bubble}else{var i=e.opacity}if(e.color.rgb){var s="rgba(".concat(e.color.rgb.r,",").concat(e.color.rgb.g,",").concat(e.color.rgb.b,",").concat(i,")")}else{var s="hsla(".concat(e.color.hsl.h,",").concat(e.color.hsl.s,"%,").concat(e.color.hsl.l,"%,_").concat(i,")")}switch(n.canvas.ctx.fillStyle=s,n.canvas.ctx.beginPath(),e.shape){default:case"circle":n.canvas.ctx.arc(e.x,e.y,t,0,2*Math.PI,!1);break;case"edge":case"triangle":n.fn.vendors.drawShape(n.canvas.ctx,e.x,e.y,t,t,3);break;case"polygon":n.fn.vendors.drawShape(n.canvas.ctx,e.x,e.y,t,t,n.particles.shape.polygon.nb_sides);break;case"star":n.fn.vendors.drawShape(n.canvas.ctx,e.x,e.y,t,t,n.particles.shape.polygon.nb_sides,2);break;case"image":if("svg"==n.tmp.img_type){var a=e.img.obj}else{var a=n.tmp.img_obj}a&&n.canvas.ctx.drawImage(a,e.x-t,e.y-t,2*t,2*t/e.img.ratio)}n.canvas.ctx.closePath(),n.particles.shape.stroke.width>0&&n.particles.shape.stroke.color&&n.particles.shape.stroke.color!="none"&&(n.canvas.ctx.strokeStyle=n.particles.shape.stroke.color,n.canvas.ctx.lineWidth=n.particles.shape.stroke.width,n.canvas.ctx.stroke()),n.canvas.ctx.fill()}},this.checkEffect=function(){n.interactivity.events.onhover.enable&&("mousemove"==n.interactivity.status?n.fn.modes.repulseParticle(this):n.fn.modes.grabParticle(this)),n.interactivity.events.onclick.enable&&n.fn.modes.bubbleParticle(this)},this.update=function(){this.x+=this.vx,this.y+=this.vy,"out"==n.particles.move.out_mode&&(this.x-this.radius>n.canvas.w?this.x=this.radius:this.x+this.radius<0&&(this.x=n.canvas.w+this.radius),this.y-this.radius>n.canvas.h?this.y=this.radius:this.y+this.radius<0&&(this.y=n.canvas.h+this.radius)),n.particles.move.bounce&&(this.x-this.radius<0?this.vx=-this.vx:this.x+this.radius>n.canvas.w&&(this.vx=-this.vx),this.y-this.radius<0?this.vy=-this.vy:this.y+this.radius>n.canvas.h&&(this.vy=-this.vy)),n.particles.opacity.anim.enable&&(this.opacity_status=="increase"?this.opacity<n.particles.opacity.value?this.opacity+=this.vo:this.opacity_status="decrease":this.opacity>n.particles.opacity.anim.opacity_min&&(this.opacity-=this.vo),this.opacity<0&&(this.opacity=0)),n.particles.size.anim.enable&&(this.size_status=="increase"?this.radius<n.particles.size.value?this.radius+=this.vs:this.size_status="decrease":this.radius>n.particles.size.anim.size_min&&(this.radius-=this.vs),this.radius<0&&(this.radius=0)),this.checkEffect(),n.fn.particlesDraw()}},n.fn.particlesCreate=function(){for(var e=0;e<n.particles.number.value;e++)n.particles.array.push(new n.fn.particle(n.particles.color,n.particles.opacity.value))},n.fn.particlesUpdate=function(){for(var e=0;e<n.particles.array.length;e++){var t=n.particles.array[e];t.update(),n.fn.interact.linkParticles(t);for(var i=e+1;i<n.particles.array.length;i++){var s=n.particles.array[i];n.fn.interact.linkParticles(t,s)}n.fn.interact.attractParticles(t),n.fn.interact.bounceParticles(t)}},n.fn.particlesDraw=function(){n.canvas.ctx.clearRect(0,0,n.canvas.w,n.canvas.h),n.fn.particlesUpdate();for(var e=0;e<n.particles.array.length;e++)n.particles.array[e].draw()},n.fn.interact.linkParticles=function(e,t){var i=e.x-t.x,s=e.y-t.y,a=Math.sqrt(i*i+s*s);if(a<=n.particles.line_linked.distance){var r=n.particles.line_linked.opacity-a/(1/n.particles.line_linked.opacity)/n.particles.line_linked.distance;if(r>0){var o=n.particles.line_linked.color_rgb_line;n.canvas.ctx.strokeStyle="rgba(".concat(o.r,",").concat(o.g,",").concat(o.b,",").concat(r,")"),n.canvas.ctx.lineWidth=n.particles.line_linked.width,n.canvas.ctx.beginPath(),n.canvas.ctx.moveTo(e.x,e.y),n.canvas.ctx.lineTo(t.x,t.y),n.canvas.ctx.stroke(),n.canvas.ctx.closePath()}}},n.fn.interact.attractParticles=function(e){if(!0==n.particles.move.attract.enable)for(var t=0;t<n.particles.array.length;t++){var i=n.particles.array[t];if(e!=i){var s=e.x-i.x,a=e.y-i.y;Math.sqrt(s*s+a*a)<=n.particles.line_linked.distance&&(e.vx-=s/(1e3*n.particles.move.attract.rotateX),e.vy-=a/(1e3*n.particles.move.attract.rotateY),i.vx+=s/(1e3*n.particles.move.attract.rotateX),i.vy+=a/(1e3*n.particles.move.attract.rotateY))}}},n.fn.interact.bounceParticles=function(e){for(var t=0;t<n.particles.array.length;t++){var i=n.particles.array[t];if(e!=i){var s=e.x-i.x,a=e.y-i.y;Math.sqrt(s*s+a*a)<=e.radius+i.radius&&(e.vx=-e.vx,e.vy=-e.vy,i.vx=-i.vx,i.vy=-i.vy)}}},n.fn.modes.pushParticles=function(e,t){n.tmp.pushing=!0;for(var i=0;i<e;i++)n.particles.array.push(new n.fn.particle(n.particles.color,n.particles.opacity.value,{x:t?t.pos_x:Math.random()*n.canvas.w,y:t?t.pos_y:Math.random()*n.canvas.h})),i==e-1&&(n.particles.move.enable||n.fn.particlesDraw(),n.tmp.pushing=!1)},n.fn.modes.removeParticles=function(e){n.particles.array.splice(0,e),n.particles.move.enable||n.fn.particlesDraw()},n.fn.modes.bubbleParticle=function(e){if(n.interactivity.events.onhover.enable&&"mousemove"==n.interactivity.status){var t=e.x-n.interactivity.mouse.pos_x,i=e.y-n.interactivity.mouse.pos_y,s=1-Math.sqrt(t*t+i*i)/n.interactivity.modes.bubble.distance;function a(){e.opacity_bubble=e.opacity,e.radius_bubble=e.radius}if(s>=0&&"mousemove"==n.interactivity.status){if(n.interactivity.modes.bubble.size!=n.particles.size.value){if(n.interactivity.modes.bubble.size>n.particles.size.value){var r=e.radius+n.interactivity.modes.bubble.size*s;r>=0&&(e.radius_bubble=r)}else{var o=e.radius-n.interactivity.modes.bubble.size*s,l=r>0?o:0;e.radius_bubble=l}}if(n.interactivity.modes.bubble.opacity!=n.particles.opacity.value){if(n.interactivity.modes.bubble.opacity>n.particles.opacity.value){var c=n.interactivity.modes.bubble.opacity*s;c>e.opacity&&c<=n.interactivity.modes.bubble.opacity&&(e.opacity_bubble=c)}else{var d=e.opacity-n.interactivity.modes.bubble.opacity*s;d<e.opacity&&d>=0&&(e.opacity_bubble=d)}}}else a();if(n.tmp.bubble_clicking){var u=e.x-n.interactivity.mouse.click_pos_x,v=e.y-n.interactivity.mouse.click_pos_y,p=Math.sqrt(u*u+v*v),f=(new Date).getTime()-n.interactivity.mouse.click_time;f<n.interactivity.modes.bubble.duration&&(n.tmp.bubble_duration_end=!1,p<=n.interactivity.modes.bubble.distance&&e.radius_bubble!=n.interactivity.modes.bubble.size&&e.opacity_bubble!=n.interactivity.modes.bubble.opacity&&(e.radius_bubble=n.interactivity.modes.bubble.size,e.opacity_bubble=n.interactivity.modes.bubble.opacity)),f>=n.interactivity.modes.bubble.duration&&(n.tmp.bubble_duration_end=!0)}n.tmp.bubble_duration_end&&a()},n.fn.modes.repulseParticle=function(e){if(n.interactivity.events.onhover.enable&&"mousemove"==n.interactivity.status||n.tmp.repulse_clicking){var t=1e3*n.particles.move.attract.rotateX,i=1e3*n.particles.move.attract.rotateY;if(n.interactivity.status=="mousemove"){var s=e.x-n.interactivity.mouse.pos_x,a=e.y-n.interactivity.mouse.pos_y}else if(n.tmp.repulse_clicking){var s=e.x-n.interactivity.mouse.click_pos_x,a=e.y-n.interactivity.mouse.click_pos_y}var r=Math.sqrt(s*s+a*a),o=s/r,l=a/r,c=Math.min(r,n.interactivity.modes.repulse.distance)/n.interactivity.modes.repulse.distance,d={x:e.x+o*c*100,y:e.y+l*c*100};"out"==n.particles.move.out_mode?0<d.x&&d.x<n.canvas.w&&0<d.y&&d.y<n.canvas.h&&(e.x=d.x,e.y=d.y):(e.x=d.x,e.y=d.y)}else if(!1==n.tmp.repulse_clicking&&(e.vx_i=e.vx,e.vy_i=e.vy,e.x+=e.vx,e.y+=e.vy))},n.fn.modes.grabParticle=function(e){if(n.interactivity.events.onhover.enable&&"mousemove"==n.interactivity.status){var t=e.x-n.interactivity.mouse.pos_x,i=e.y-n.interactivity.mouse.pos_y,s=Math.sqrt(t*t+i*i);if(s<=n.interactivity.modes.grab.distance){var a=n.interactivity.modes.grab.line_linked.opacity-s/(1/n.interactivity.modes.grab.line_linked.opacity)/n.interactivity.modes.grab.distance;if(a>0){var r=n.particles.line_linked.color_rgb_line;n.canvas.ctx.strokeStyle="rgba(".concat(r.r,",").concat(r.g,",").concat(r.b,",").concat(a,")"),n.canvas.ctx.lineWidth=n.particles.line_linked.width,n.canvas.ctx.beginPath(),n.canvas.ctx.moveTo(e.x,e.y),n.canvas.ctx.lineTo(n.interactivity.mouse.pos_x,n.interactivity.mouse.pos_y),n.canvas.ctx.stroke(),n.canvas.ctx.closePath()}}}},n.fn.vendors.init();for(var s in n.interactivity.events.onhover.mode instanceof Array?n.interactivity.events.onhover.mode:n.interactivity.events.onhover.mode.split(" ")){var a=n.interactivity.events.onhover.mode[s];n.fn.modes[a]&&n.fn.modes[a]()}n.fn.vendors.eventsListeners(),n.fn.vendors.start()};Object.deepExtend=function(e,t){for(var i in t)t[i]&&t[i].constructor&&t[i].constructor===Object?(e[i]=e[i]||{},arguments.callee(e[i],t[i])):e[i]=t[i];return e},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),window.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout}(),window.hexToRgb=function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,i,n){return t+t+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null},window.pJSDom=[],window.particlesJS=function(t,i){"string"!=typeof t&&(i=t,t="particles-js"),t||(t="particles-js");var n=document.getElementById(t),s="particles-js-canvas-el",a=n.getElementsByClassName(s);if(a.length)for(;a.length>0;)n.removeChild(a[0]);var r=document.createElement("canvas");r.className=s,r.style.width="100%",r.style.height="100%";var o=document.getElementById(t).appendChild(r);o&&pJSDom.push(new e(t,i))},window.particlesJS.load=function(e,t,i){var n=new XMLHttpRequest;n.open("GET",t),n.onreadystatechange=function(t){if(4==n.readyState)if(200==n.status){var s=JSON.parse(t.currentTarget.response);window.particlesJS(e,s),i&&i()}else console.log("Error pJS - XMLHttpRequest status: "+n.status),console.log("Error pJS - File config not found")},n.send()});
</script>

<script>
    document.addEventListener('DOMContentLoaded', () => {

        const startTime = Date.now();
        const minLoadingTime = 4000;

        window.addEventListener('load', () => {
            const loaderWrapper = document.querySelector('.loader-wrapper');
            const endTime = Date.now();
            const elapsedTime = endTime - startTime;

            const timeToWait = Math.max(0, minLoadingTime - elapsedTime);

            setTimeout(() => {
                if (loaderWrapper) {
                    loaderWrapper.classList.add('fade-out');
                }
                document.body.style.overflow = 'auto';
            }, timeToWait);
        });

        const bgMusic = document.getElementById('bg-music');
        const startMusic = () => {
            if (bgMusic.paused) {
                bgMusic.play().catch(error => {
                    console.log("Background music waiting for user interaction.");
                });
            }
            document.body.removeEventListener('click', startMusic);
            document.body.removeEventListener('keydown', startMusic);
            document.body.removeEventListener('touchstart', startMusic);
        };
        document.body.addEventListener('click', startMusic);
        document.body.addEventListener('keydown', startMusic);
        document.body.addEventListener('touchstart', startMusic);

        const confettiBtn = document.getElementById('confetti-btn');
        if (confettiBtn && typeof confetti !== 'undefined') {
            const myCanvas = document.getElementById('confetti-canvas');
            const myConfetti = confetti.create(myCanvas, { resize: true, useWorker: true });
            confettiBtn.addEventListener('click', () => {
                const rect = confettiBtn.getBoundingClientRect();
                const x = (rect.left + rect.right) / 2 / window.innerWidth;
                const y = (rect.top + rect.bottom) / 2 / window.innerHeight;
                myConfetti({
                    particleCount: 150,
                    spread: 90,
                    origin: { x: x, y: y },
                    colors: ['#ff8fab', '#f8a5c2', '#ffffff', '#f7b733']
                });
            });
        }

        const animateTextObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const chars = entry.target.querySelectorAll('.char');
                    chars.forEach((char, i) => {
                        setTimeout(() => {
                            char.style.opacity = '1';
                            char.style.transform = 'translateY(0)';
                        }, i * 50);
                    });
                    animateTextObserver.unobserve(entry.target);
                }
            });
        }, { threshold: 0.5 });

        document.querySelectorAll('.section-title').forEach(title => {
            const text = title.textContent;
            const icon = title.querySelector('i');
            title.innerHTML = '';
            if (icon) title.appendChild(icon);
            text.trim().split('').forEach(char => {
                const span = document.createElement('span');
                span.className = 'char';
                span.style.setProperty('white-space', 'pre');
                span.textContent = char;
                title.appendChild(span);
            });
            animateTextObserver.observe(title);
        });

        function getParticlesConfig() {
            const isDark = document.body.classList.contains('dark-theme');
            const particleColor = isDark ? "#4a4a6b" : "#ffffff";
            const lineColor = isDark ? "#4a4a6b" : "#ffffff";
            const particleOpacity = isDark ? 0.3 : 0.4;
            return {
                "particles": { "number": { "value": 40, "density": { "enable": true, "value_area": 800 } }, "color": { "value": particleColor }, "shape": { "type": "circle" }, "opacity": { "value": particleOpacity, "random": true, "anim": { "enable": true, "speed": 1, "opacity_min": 0.1, "sync": false } }, "size": { "value": 2.5, "random": true }, "line_linked": { "enable": true, "distance": 150, "color": lineColor, "opacity": 0.2, "width": 1 }, "move": { "enable": true, "speed": 1, "direction": "none", "random": true, "straight": false, "out_mode": "out", "bounce": false } },
                "interactivity": { "detect_on": "canvas", "events": { "onhover": { "enable": true, "mode": "repulse" } }, "modes": { "repulse": { "distance": 100, "duration": 0.4 } } },
                "retina_detect": true
            };
        }
        if (typeof particlesJS !== 'undefined') {
            particlesJS('particles-js', getParticlesConfig());
        }

        const themeSwitch = document.getElementById('checkbox');
        themeSwitch.addEventListener('change', () => {
            document.body.classList.toggle('dark-theme');
            if (window.pJSDom && window.pJSDom.length > 0) { pJSDom[0].pJS.fn.vendors.destroypJS(); pJSDom = []; }
            if (typeof particlesJS !== 'undefined') { particlesJS('particles-js', getParticlesConfig()); }
        });

        const revealObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('.reveal, .trait-card').forEach(el => revealObserver.observe(el));

        const navbar = document.querySelector('.navbar');
        const navLinksContainer = document.querySelector('.nav-links');
        const menuToggle = document.querySelector('.menu-toggle');
        const closeMenu = document.querySelector('.close-menu');
        const navLinks = document.querySelectorAll('.nav-link');

        menuToggle.addEventListener('click', () => navLinksContainer.classList.add('active'));
        closeMenu.addEventListener('click', () => navLinksContainer.classList.remove('active'));
        navLinks.forEach(link => {
            link.addEventListener('click', () => navLinksContainer.classList.remove('active'));
        });

        const sections = document.querySelectorAll('section, header');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) navbar.classList.add('scrolled');
            else navbar.classList.remove('scrolled');

            let currentId = 'home';
            sections.forEach(section => {
                if (pageYOffset >= section.offsetTop - navbar.offsetHeight - 50) {
                    currentId = section.getAttribute('id');
                }
            });
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${currentId}`) {
                    link.classList.add('active');
                }
            });
        });

        const slides = document.querySelectorAll('.slide');
        const thumbnails = document.querySelectorAll('.thumbnail');
        const prevSlideBtn = document.querySelector('.slide-prev');
        const nextSlideBtn = document.querySelector('.slide-next');
        let currentSlide = 0;
        let slideInterval = setInterval(nextSlide, 7000);

        function showSlide(n) {
            if (slides.length === 0) return;
            slides[currentSlide].classList.remove('active');
            thumbnails[currentSlide].classList.remove('active');
            currentSlide = (n + slides.length) % slides.length;
            slides[currentSlide].classList.add('active');
            thumbnails[currentSlide].classList.add('active');
        }
        function nextSlide() { showSlide(currentSlide + 1); }
        function resetSlideInterval() { clearInterval(slideInterval); slideInterval = setInterval(nextSlide, 7000); }
        if (prevSlideBtn) prevSlideBtn.addEventListener('click', () => { showSlide(currentSlide - 1); resetSlideInterval(); });
        if (nextSlideBtn) nextSlideBtn.addEventListener('click', () => { showSlide(currentSlide + 1); resetSlideInterval(); });
        thumbnails.forEach((t, i) => t.addEventListener('click', () => { showSlide(i); resetSlideInterval(); }));

        const carouselDesktop = document.querySelector('.carousel-container-desktop');
        if (carouselDesktop) {
            const carouselWrapper = document.querySelector('.carousel-wrapper');
            const carouselItems = carouselDesktop.querySelectorAll('.carousel-item');
            const prevBtn = document.getElementById('prev-carousel-btn');
            const nextBtn = document.getElementById('next-carousel-btn');
            const totalItems = carouselItems.length;
            const angle = 360 / totalItems;
            const tz = Math.round((250 / 2) / Math.tan(Math.PI / totalItems));
            let currentAngle = 0;
            carouselItems.forEach((item, i) => { item.style.transform = `rotateY(${i * angle}deg) translateZ(${tz}px)`; });

            let carouselInterval = setInterval(() => {
                currentAngle -= angle;
                carouselDesktop.style.transform = `rotateY(${currentAngle}deg)`;
            }, 3000);
            carouselWrapper.addEventListener('mouseenter', () => clearInterval(carouselInterval));
            carouselWrapper.addEventListener('mouseleave', () => {
                carouselInterval = setInterval(() => {
                    currentAngle -= angle;
                    carouselDesktop.style.transform = `rotateY(${currentAngle}deg)`;
                }, 3000);
            });
            prevBtn.addEventListener('click', () => { currentAngle += angle; carouselDesktop.style.transform = `rotateY(${currentAngle}deg)`; });
            nextBtn.addEventListener('click', () => { currentAngle -= angle; carouselDesktop.style.transform = `rotateY(${currentAngle}deg)`; });
        }

        const audioPlayer = document.getElementById('audio-player');
        let audioContext;
        let isAudioContextInitialized = false;
        const playPauseBtn = document.getElementById('play-pause-btn');
        const musicPrevBtn = document.getElementById('prev-btn');
        const musicNextBtn = document.getElementById('next-btn');
        const seekBar = document.getElementById('seek-bar');
        const currentTimeEl = document.getElementById('current-time');
        const durationEl = document.getElementById('duration');
        const albumArtImg = document.getElementById('album-art-img');
        const songTitleEl = document.getElementById('cool-song-title');
        const lyricsList = document.getElementById('lyrics-list');
        const playlist = [
            { title: "ä¸€ç¬‘å€¾åŸ", artist: "æ±ªè‹æ³·", src: "music/ä¸€ç¬‘å€¾åŸ-æ±ªè‹æ³·.mp3", albumArt: "img/ä¸€ç¬‘å€¾åŸ-æ±ªè‹æ³·.jpg", lrcSrc: "gc/ä¸€ç¬‘å€¾åŸ-æ±ªè‹æ³·.lrc" },
            { title: "é»‘æ¢¦", artist: "æ±ªè‹æ³·", src: "music/é»‘æ¢¦-æ±ªè‹æ³·.mp3", albumArt: "img/é»‘æ¢¦-æ±ªè‹æ³·.jpg", lrcSrc: "gc/é»‘æ¢¦-æ±ªè‹æ³·.lrc" },
            { title: "å¹´è½®", artist: "æ±ªè‹æ³·", src: "music/å¹´è½®-æ±ªè‹æ³·.mp3", albumArt: "img/å¹´è½®-æ±ªè‹æ³·.jpg", lrcSrc: "gc/å¹´è½®-æ±ªè‹æ³·.lrc" },
            { title: "ä¸åˆ†æ‰‹çš„æ‹çˆ±", artist: "æ±ªè‹æ³·", src: "music/ä¸åˆ†æ‰‹çš„æ‹çˆ±-æ±ªè‹æ³·.mp3", albumArt: "img/ä¸åˆ†æ‰‹çš„æ‹çˆ±-æ±ªè‹æ³·.jpg", lrcSrc: "gc/ä¸åˆ†æ‰‹çš„æ‹çˆ±-æ±ªè‹æ³·.lrc" },
            { title: "åä¼šæ— æœŸ", artist: "å¾è‰¯ & æ±ªè‹æ³·", src: "music/åä¼šæ— æœŸ-å¾è‰¯&æ±ªè‹æ³·.mp3", albumArt: "img/åä¼šæ— æœŸ-å¾è‰¯&æ±ªè‹æ³·.jpg", lrcSrc: "gc/åä¼šæ— æœŸ-å¾è‰¯&æ±ªè‹æ³·.lrc" },
            { title: "å¦‚æœçˆ±å¿˜äº† (Live)", artist: "æ±ªè‹æ³·", src: "music/å¦‚æœçˆ±å¿˜äº† (live)-æ±ªè‹æ³·&å•ä¾çº¯.mp3", albumArt: "img/å¦‚æœçˆ±å¿˜äº† (live)-æ±ªè‹æ³·&å•ä¾çº¯.jpg", lrcSrc: "gc/å¦‚æœçˆ±å¿˜äº† (live)-æ±ªè‹æ³·&å•ä¾çº¯.lrc" },
            { title: "åä¸‡ä¼ç‰¹", artist: "æ±ªè‹æ³·", src: "music/åä¸‡ä¼ç‰¹-æ±ªè‹æ³·.mp3", albumArt: "img/åä¸‡ä¼ç‰¹-æ±ªè‹æ³·.jpg", lrcSrc: "gc/åä¸‡ä¼ç‰¹-æ±ªè‹æ³·.lrc" },
            { title: "ä¸‡æœ‰å¼•åŠ›", artist: "æ±ªè‹æ³·", src: "music/ä¸‡æœ‰å¼•åŠ›-æ±ªè‹æ³·.mp3", albumArt: "img/ä¸‡æœ‰å¼•åŠ›-æ±ªè‹æ³·.jpg", lrcSrc: "gc/ä¸‡æœ‰å¼•åŠ›-æ±ªè‹æ³·.lrc" },
            { title: "ä¸ºä½ å†™è¯—", artist: "æ±ªè‹æ³·", src: "music/ä¸ºä½ å†™è¯—-æ±ªè‹æ³·&å‘¨æ´ç¼.mp3", albumArt: "img/ä¸ºä½ å†™è¯—-æ±ªè‹æ³·&å‘¨æ´ç¼.jpg", lrcSrc: "gc/ä¸ºä½ å†™è¯—-æ±ªè‹æ³·&å‘¨æ´ç¼.lrc" },
            { title: "æˆ‘æƒ³å¿µ", artist: "æ±ªè‹æ³·", src: "music/æˆ‘æƒ³å¿µ-æ±ªè‹æ³·.mp3", albumArt: "img/æˆ‘æƒ³å¿µ-æ±ªè‹æ³·.jpg", lrcSrc: "gc/æˆ‘æƒ³å¿µ-æ±ªè‹æ³·.lrc" },
            { title: "å°æ˜Ÿæ˜Ÿ", artist: "æ±ªè‹æ³·", src: "music/å°æ˜Ÿæ˜Ÿ-æ±ªè‹æ³·.mp3", albumArt: "img/å°æ˜Ÿæ˜Ÿ-æ±ªè‹æ³·.jpg", lrcSrc: "gc/å°æ˜Ÿæ˜Ÿ-æ±ªè‹æ³·.lrc" },
            { title: "æœ‰ç‚¹ç”œ", artist: "æ±ªè‹æ³· & By2", src: "music/æœ‰ç‚¹ç”œ-æ±ªè‹æ³·&By2.mp3", albumArt: "img/æœ‰ç‚¹ç”œ-æ±ªè‹æ³·&By2.jpg", lrcSrc: "gc/æœ‰ç‚¹ç”œ-æ±ªè‹æ³·&By2.lrc" }
        ];
        let currentSongIndex = 0;
        let isPlaying = false;
        let currentLyrics = [];
        let currentLyricIndex = -1;

        function initializeAudio() {
            if (isAudioContextInitialized) return;
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const source = audioContext.createMediaElementSource(audioPlayer);
            source.connect(audioContext.destination);
            isAudioContextInitialized = true;
        }
        function playSong() {
            if (!isAudioContextInitialized) initializeAudio();
            if (audioContext.state === 'suspended') audioContext.resume();
            bgMusic.pause();
            const playPromise = audioPlayer.play();
            if (playPromise !== undefined) {
                playPromise.then(() => {
                    isPlaying = true;
                    albumArtImg.classList.add('playing');
                    playPauseBtn.innerHTML = '<i class="fa-solid fa-pause"></i>';
                }).catch(error => { isPlaying = false; });
            }
        }
        function pauseSong() {
            audioPlayer.pause();
            isPlaying = false;
            albumArtImg.classList.remove('playing');
            playPauseBtn.innerHTML = '<i class="fa-solid fa-play"></i>';
        }
        if (playPauseBtn) playPauseBtn.addEventListener('click', () => { isPlaying ? pauseSong() : playSong(); });

        function parseLRC(lrcContent) {
            const lines = lrcContent.split('\n'); const lyrics = []; const timeRegex = /\[(\d{2}):(\d{2})[.:](\d{2,3})\]/;
            for (const line of lines) {
                const match = timeRegex.exec(line);
                if (match) {
                    const time = parseInt(match[1], 10) * 60 + parseInt(match[2], 10) + parseInt(match[3].padEnd(3, '0'), 10) / 1000;
                    const text = line.replace(timeRegex, '').trim();
                    if (text) lyrics.push({ time, text });
                }
            } return lyrics;
        }
        async function loadLyrics(lrcPath) {
            try {
                const response = await fetch(lrcPath); if (!response.ok) throw new Error('Lyric file not found');
                const lrcText = await response.text(); currentLyrics = parseLRC(lrcText); lyricsList.innerHTML = '';
                currentLyrics.forEach(lyric => { const li = document.createElement('li'); li.textContent = lyric.text; lyricsList.appendChild(li); });
            } catch (error) { lyricsList.innerHTML = '<li>æš‚æ— æ­Œè¯</li>'; currentLyrics = []; }
            lyricsList.style.transform = 'translateY(0)'; currentLyricIndex = -1;
        }
        function updateLyrics() {
            if (!currentLyrics.length || !lyricsList) return;
            const currentTime = audioPlayer.currentTime;
            let newLyricIndex = currentLyrics.findIndex((lyric, index) => {
                const nextLyric = currentLyrics[index + 1];
                return currentTime >= lyric.time && (!nextLyric || currentTime < nextLyric.time);
            });
            if (newLyricIndex !== -1 && newLyricIndex !== currentLyricIndex) {
                const allLi = lyricsList.querySelectorAll('li');
                if (currentLyricIndex !== -1 && allLi[currentLyricIndex]) allLi[currentLyricIndex].classList.remove('active');
                if (allLi[newLyricIndex]) {
                    allLi[newLyricIndex].classList.add('active');
                    currentLyricIndex = newLyricIndex;
                    const activeLi = allLi[newLyricIndex];
                    const listContainer = document.querySelector('.lyrics-container');
                    const scrollOffset = activeLi.offsetTop - listContainer.clientHeight / 2 + activeLi.clientHeight / 2;
                    lyricsList.style.transform = `translateY(-${scrollOffset}px)`;
                }
            }
        }
        function loadSong(song) {
            if (!song) return;
            songTitleEl.textContent = song.title;
            albumArtImg.src = song.albumArt;
            audioPlayer.src = song.src;
            loadLyrics(song.lrcSrc);
            audioPlayer.addEventListener('loadedmetadata', () => {
                if (!isNaN(audioPlayer.duration)) {
                    durationEl.textContent = formatTime(audioPlayer.duration);
                    seekBar.max = audioPlayer.duration;
                }
            });
        }
        function prevSong() { currentSongIndex = (currentSongIndex - 1 + playlist.length) % playlist.length; loadSong(playlist[currentSongIndex]); if (isPlaying) playSong(); }
        function nextSong() { currentSongIndex = (currentSongIndex + 1) % playlist.length; loadSong(playlist[currentSongIndex]); if (isPlaying) playSong(); }
        function updateProgress() {
            if (audioPlayer.duration && !isNaN(audioPlayer.currentTime)) {
                seekBar.value = audioPlayer.currentTime;
                currentTimeEl.textContent = formatTime(audioPlayer.currentTime);
                updateLyrics();
            }
        }
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60); const secs = Math.floor(seconds % 60);
            return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
        }
        if (musicPrevBtn) musicPrevBtn.addEventListener('click', prevSong);
        if (musicNextBtn) musicNextBtn.addEventListener('click', nextSong);
        if (audioPlayer) {
            audioPlayer.addEventListener('timeupdate', updateProgress);
            audioPlayer.addEventListener('ended', nextSong);
        }
        if (seekBar) {
            seekBar.addEventListener('input', () => { if (!isNaN(seekBar.value)) audioPlayer.currentTime = seekBar.value; });
        }
        if (playlist.length > 0) {
            loadSong(playlist[currentSongIndex]);
        }
    });
</script>

</body>
</html>