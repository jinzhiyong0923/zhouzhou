<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸€ä»½ä¸ºä½ å®šåˆ¶çš„æ˜Ÿå…‰ä¹‹æ—…</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <style>
        /* CSS STYLES - V5.0 EPIC FINAL */
        @import url('https://fonts.googleapis.com/css2?family=ZCOOL+XiaoWei&family=Noto+Sans+SC:wght@300;400;700&display=swap');
        :root {
            --primary-color: #ff8fab; --secondary-color: #f8a5c2; --accent-color: #e57373; --text-color: #5d5d5d; --light-text-color: #ffffff; --bg-light: #fffcf7; --bg-accent: #feedf2; --shadow-color: rgba(184, 98, 122, 0.15);
        }
        html { scroll-behavior: smooth; }
        body { font-family: 'Noto Sans SC', sans-serif; color: var(--text-color); margin: 0; background-color: var(--bg-light); overflow-x: hidden; }
        .content-wrapper { max-width: 1100px; margin: 0 auto; padding: 0 20px; }
        .reveal { opacity: 0; transform: translateY(50px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .reveal.visible { opacity: 1; transform: translateY(0); }

        /* --- Welcome Screen --- */
        #welcome-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #ffdde1, #ee9ca7); z-index: 9999; display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; transition: opacity 1s ease, visibility 1s ease; }
        #welcome-screen.hidden { opacity: 0; visibility: hidden; }
        #welcome-title { font-family: 'ZCOOL XiaoWei', serif; font-size: 3em; text-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        #start-journey-btn { background: white; color: var(--primary-color); border: none; padding: 15px 40px; font-size: 1.2em; font-weight: bold; border-radius: 50px; cursor: pointer; margin-top: 30px; transition: transform 0.3s, box-shadow 0.3s; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        #start-journey-btn:hover { transform: scale(1.1); box-shadow: 0 10px 25px rgba(0,0,0,0.3); }

        /* --- Interactive Particle Background --- */
        #particles-js { position: fixed; width: 100%; height: 100%; top: 0; left: 0; z-index: -1; }

        /* --- Navigation Bar --- */
        .navbar { position: fixed; top: 0; left: 0; width: 100%; background: rgba(255, 252, 247, 0.85); backdrop-filter: blur(10px); box-shadow: 0 2px 10px var(--shadow-color); z-index: 1000; height: 65px; display: flex; justify-content: center; align-items: center; transition: top 0.3s; }
        .navbar a { color: var(--text-color); text-decoration: none; padding: 10px 20px; font-weight: bold; font-size: 1.1em; transition: color 0.3s, transform 0.3s; }
        .navbar a:hover, .navbar a.active { color: var(--primary-color); transform: translateY(-2px); }

        /* --- Hero Header Section --- */
        .hero-section { height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; color: white; position: relative; overflow: hidden; }
        .hero-section-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: url('img/bg.jpg') no-repeat center center/cover; background-attachment: fixed; z-index: -2; filter: brightness(0.8); }
        .hero-section::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, rgba(255, 141, 171, 0.4), rgba(248, 165, 194, 0.4)); z-index: -1; }
        .hero-title { font-family: 'ZCOOL XiaoWei', serif; font-size: 4.5em; margin: 0; text-shadow: 0 0 20px rgba(0,0,0,0.3); animation: fadeInDown 1.5s ease-out; }
        .hero-subtitle { font-size: 1.5em; margin-top: 15px; letter-spacing: 2px; animation: fadeInUp 1.5s ease-out; }
        .scroll-down-indicator { position: absolute; bottom: 30px; font-size: 2em; animation: bounce 2s infinite; color: white; }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% { transform: translateY(0); } 40% { transform: translateY(-20px); } 60% { transform: translateY(-10px); } }
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-50px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }

        /* --- Section Styling --- */
        .section { padding: 100px 0; position: relative; overflow: hidden; }
        .section-title { font-family: 'ZCOOL XiaoWei', serif; text-align: center; font-size: 3em; margin-bottom: 60px; color: var(--primary-color); }
        .section-light { background-color: var(--bg-light); }
        .section-accent-bg { background-color: var(--bg-accent); }
        .section-gradient { background: linear-gradient(135deg, #ffdde1, #ee9ca7); color: white; }
        .section-gradient .section-title { color: white; }

        /* --- Gallery Section (Masonry/Waterfall Effect) --- */
        .photo-grid { column-count: 3; column-gap: 20px; }
        .photo-item { margin-bottom: 20px; break-inside: avoid; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 30px var(--shadow-color); transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .photo-item:hover { transform: translateY(-10px) scale(1.03); box-shadow: 0 15px 40px rgba(184, 98, 122, 0.25); }
        .photo-item img { width: 100%; height: auto; display: block; }
        @media (max-width: 992px) { .photo-grid { column-count: 2; } }
        @media (max-width: 576px) { .photo-grid { column-count: 1; } }

        /* --- Friend & Sulong Section --- */
        .card-container { display: flex; justify-content: center; align-items: stretch; gap: 50px; flex-wrap: wrap; }
        .interactive-card { background: white; border-radius: 20px; padding: 30px; width: 400px; text-align: center; box-shadow: 0 15px 40px var(--shadow-color); transition: transform 0.1s, box-shadow 0.3s; perspective: 1000px; }
        .interactive-card:hover { box-shadow: 0 25px 50px var(--shadow-color); }
        .card-image { width: 150px; height: 150px; border-radius: 50%; object-fit: cover; border: 5px solid var(--secondary-color); margin-bottom: 20px; }
        .card-title { font-size: 1.8em; font-weight: bold; margin-bottom: 10px; color: var(--primary-color); }
        .card-text { font-size: 1.1em; line-height: 1.6; color: var(--text-color); }
        .flip-card { background-color: transparent; width: 400px; height: 380px; perspective: 1000px; }
        .flip-card-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.8s; transform-style: preserve-3d; }
        .flip-card:hover .flip-card-inner { transform: rotateY(180deg); }
        .flip-card-front, .flip-card-back { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; border-radius: 20px; box-shadow: 0 15px 40px var(--shadow-color); display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 30px; }
        .flip-card-front { background: linear-gradient(135deg, #ff8fab, #fb6b90); color: white; }
        .flip-card-back { background: linear-gradient(135deg, #f7b733, #fc4a1a); color: white; transform: rotateY(180deg); }
        .flip-card .card-title { color: white; }
        .flip-card .card-text { font-style: italic; }

        /* --- Typing Effect --- */
        #typing-title .cursor { display: inline-block; background-color: var(--primary-color); margin-left: 5px; width: 3px; animation: blink 1s infinite; }
        @keyframes blink { 50% { background-color: transparent; } }

        /* --- Timeline Section --- */
        .timeline-container { position: relative; max-width: 800px; margin: 0 auto; }
        .timeline-container::after { content: ''; position: absolute; width: 4px; background-color: var(--secondary-color); top: 0; bottom: 0; left: 50%; margin-left: -2px; }
        .timeline-item { padding: 10px 40px; position: relative; background-color: inherit; width: 50%; }
        .timeline-item.left { left: 0; }
        .timeline-item.right { left: 50%; }
        .timeline-item::after { content: ''; position: absolute; width: 20px; height: 20px; right: -12px; background-color: white; border: 4px solid var(--primary-color); top: 25px; border-radius: 50%; z-index: 1; }
        .timeline-item.right::after { left: -8px; }
        .timeline-content { padding: 20px 30px; background: white; position: relative; border-radius: 8px; box-shadow: 0 5px 15px var(--shadow-color); }
        .timeline-date { font-weight: bold; color: var(--primary-color); margin-bottom: 10px; }

        /* --- Music Player Section --- */
        .cool-player { display: flex; align-items: center; gap: 30px; flex-wrap: wrap;}
        .album-art-container { width: 200px; height: 200px; position: relative; flex-shrink: 0; }
        .album-art { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; border: 5px solid white; box-shadow: 0 5px 20px rgba(0,0,0,0.2); transition: transform 0.5s ease; }
        .album-art.playing { animation: spin 12s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .player-controls { flex-grow: 1; display: flex; flex-direction: column; align-items: center; color: white; width: calc(100% - 230px); }
        .song-info { text-align: center; margin-bottom: 15px; }
        #cool-song-title { font-size: 1.8em; font-weight: bold; text-shadow: 1px 1px 3px rgba(0,0,0,0.2); }
        #cool-song-artist { font-size: 1.1em; opacity: 0.8; }
        .buttons { display: flex; align-items: center; gap: 20px; margin: 15px 0; }
        .buttons button { background: none; border: 2px solid white; color: white; width: 50px; height: 50px; border-radius: 50%; font-size: 1.2em; cursor: pointer; transition: background-color 0.3s, transform 0.3s; display: flex; justify-content: center; align-items: center; }
        .buttons button:hover { background-color: rgba(255, 255, 255, 0.2); }
        .buttons #play-pause-btn { width: 65px; height: 65px; font-size: 1.8em; transform: scale(1); }
        .buttons #play-pause-btn:hover { transform: scale(1.1); }
        .progress-container { width: 100%; display: flex; align-items: center; gap: 10px; font-size: 0.9em; }
        #seek-bar { -webkit-appearance: none; appearance: none; width: 100%; height: 6px; background: rgba(255, 255, 255, 0.3); border-radius: 5px; outline: none; cursor: pointer; }
        #seek-bar::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 16px; height: 16px; background: white; border-radius: 50%; }
        .lyrics-container { margin-top: 20px; background: rgba(255,255,255,0.1); padding: 10px; border-radius: 10px; height: 120px; overflow: hidden; position: relative; width: 100%; }
        #lyrics-list { list-style: none; padding: 0; margin: 0; text-align: center; color: rgba(255, 255, 255, 0.6); transition: transform 0.5s ease-out; }
        #lyrics-list li { padding: 8px 0; font-size: 1.1em; transition: color 0.3s, font-size 0.3s; }
        #lyrics-list li.active { color: white; font-weight: bold; font-size: 1.3em; }

        /* --- Footer --- */
        footer { background-color: #fff0f5; color: #aaa; text-align: center; padding: 40px 20px; }
        .beat { color: var(--accent-color); animation: beat 1.2s infinite; }
        @keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }
    </style>
</head>
<body>

<div id="welcome-screen">
    <h2 id="welcome-title">ğŸ ä¸€ä»½ç‰¹åˆ«çš„ç¤¼ç‰©ï¼Œå³å°†å¼€å¯...</h2>
    <button id="start-journey-btn">å¼€å¯æ˜Ÿå…‰ä¹‹æ—…</button>
</div>

<div id="particles-js"></div>

<nav class="navbar">
    <a href="#home" class="nav-link active">é¦–é¡µ</a>
    <a href="#gallery" class="nav-link">æ˜Ÿå…‰é›†</a>
    <a href="#for-her" class="nav-link">For You</a>
    <a href="#timeline" class="nav-link">æˆ‘ä»¬çš„æ•…äº‹</a>
    <a href="#music-section" class="nav-link">éŸ³ä¹ç›’</a>
</nav>

<header id="home" class="hero-section">
    <div class="hero-section-bg"></div>
    <div class="content-wrapper">
        <h1 class="hero-title">ä¸€ä»½ä¸ºä½ å®šåˆ¶çš„æ˜Ÿå…‰ä¹‹æ—…</h1>
        <p class="hero-subtitle">é€ç»™ [å‘¨å‘¨áƒ¦] çš„ä¸“å±ç¤¼ç‰©</p>
    </div>
    <a href="#gallery" class="scroll-down-indicator"><i class="fa-solid fa-chevron-down"></i></a>
</header>

<section id="gallery" class="section section-light">
    <div class="content-wrapper">
        <h2 class="section-title reveal">æ±ªè‹æ³· | æ˜Ÿå…‰é›†</h2>
        <div class="photo-grid">
            <div class="photo-item reveal"><img src="img/èˆå°.jpg" alt="æ±ªè‹æ³· èˆå°ç…§"></div>
            <div class="photo-item reveal"><img src="img/ç”Ÿæ´».jpg" alt="æ±ªè‹æ³· ç”Ÿæ´»ç…§"></div>
            <div class="photo-item reveal"><img src="img/æ‚å¿—.jpg" alt="æ±ªè‹æ³· æ‚å¿—ç…§"></div>
            <div class="photo-item reveal"><img src="img/å¯çˆ±.jpg" alt="æ±ªè‹æ³· å¯çˆ±ç¬é—´"></div>
            <div class="photo-item reveal"><img src="img/ç«–å›¾1.jpg" alt="æ±ªè‹æ³· ç«–å›¾1"></div>
            <div class="photo-item reveal"><img src="img/ç«–å›¾2.jpg" alt="æ±ªè‹æ³· ç«–å›¾2"></div>
        </div>
    </div>
</section>

<section id="for-her" class="section section-accent-bg">
    <div class="content-wrapper">
        <h2 id="typing-title" class="section-title reveal"></h2>
        <div class="card-container">
            <div class="flip-card reveal">
                <div class="flip-card-inner">
                    <div class="flip-card-front">
                        <img src="img/å‘¨å‘¨.jpg" alt="ç…§ç‰‡" class="card-image">
                        <h3 class="card-title">å‘¨å‘¨áƒ¦</h3>
                        <p class="card-text">(æ‚¬åœæˆ–ç‚¹å‡»å¡ç‰‡æœ‰æƒŠå–œ)</p>
                    </div>
                    <div class="flip-card-back">
                        <h3 class="card-title">To: æœ€å¥½çš„å‘¨å‘¨áƒ¦</h3>
                        <p class="card-text">"å˜¿ï¼Œé™¤äº†ä½ å–œæ¬¢çš„æ­Œæ‰‹ï¼Œæˆ‘æ›´æƒ³è¯´ï¼Œè®¤è¯†ä½ çœŸå¥½ï¼å¸Œæœ›è¿™ä»½å°ç¤¼ç‰©ä½ èƒ½å–œæ¬¢ã€‚æ„¿ä½ çš„ä¸–ç•Œæ°¸è¿œåƒä»–çš„æ­Œä¸€æ ·ï¼Œå……æ»¡é˜³å…‰å’Œç”œèœœï¼"</p>
                    </div>
                </div>
            </div>
            <div id="sulong-zone" class="interactive-card reveal">
                <img src="img/ç´ é¾™.jpg" alt="ç´ é¾™å¤´åƒ" class="card-image">
                <h3 class="card-title">å®‡å®™æœ€èŒ Â· ç´ é¾™</h3>
                <p class="card-text">ä»ä¸€ä¸ªå¯çˆ±çš„è°éŸ³æ¢—ï¼Œåˆ°ä¸€ä¸ªçœŸå®çš„å®è´ç©å¶ã€‚ç´ é¾™æ˜¯æˆ‘ä»¬ä¹‹é—´å¿ƒç…§ä¸å®£çš„ç”œèœœæš—å·ï¼</p>
            </div>
        </div>
    </div>
</section>

<section id="timeline" class="section section-light">
    <div class="content-wrapper">
        <h2 class="section-title reveal">æˆ‘ä»¬çš„æ•…äº‹ | Our Story</h2>
        <div class="timeline-container">
            <div class="timeline-item left reveal">
                <div class="timeline-content">
                    <h3 class="timeline-date">2023å¹´ Â· å¤</h3>
                    <p>é‚£æ˜¯ä¸€ä¸ªå¤å¤©ï¼Œæˆ‘ä»¬åœ¨ [åœ°ç‚¹] ç¬¬ä¸€æ¬¡ç›¸é‡ï¼Œå› ä¸ºéƒ½å–œæ¬¢ [å…±åŒçˆ±å¥½] è€ŒèŠåˆ°äº†ä¸€èµ·...</p>
                </div>
            </div>
            <div class="timeline-item right reveal">
                <div class="timeline-content">
                    <h3 class="timeline-date">2024å¹´ Â· æ˜¥</h3>
                    <p>æˆ‘ä»¬ä¸€èµ·å»çœ‹äº†é‚£åœºæœŸå¾…å·²ä¹…çš„æ¼”å”±ä¼šï¼Œå½“ã€Šä¸€ç¬‘å€¾åŸã€‹çš„æ—‹å¾‹å“èµ·æ—¶ï¼Œæˆ‘ä»¬éƒ½æ¿€åŠ¨å¾—ä¸è¡Œï¼</p>
                </div>
            </div>
            <div class="timeline-item left reveal">
                <div class="timeline-content">
                    <h3 class="timeline-date">æŸä¸ªéš¾å¿˜çš„ç¬é—´</h3>
                    <p>è¿˜è®°å¾—é‚£æ¬¡ [äº‹ä»¶] å—ï¼ŸçœŸçš„è¶…çº§æç¬‘/æ„ŸåŠ¨ï¼Œç°åœ¨æƒ³èµ·æ¥éƒ½è§‰å¾—å¾ˆç‰¹åˆ«ã€‚</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="music-section" class="section section-gradient">
    <div class="content-wrapper">
        <h2 class="section-title reveal"><i class="fa-solid fa-compact-disc"></i> æ²‰æµ¸éŸ³ä¹ç›’</h2>
        <div id="music-player" class="reveal">
            <div class="cool-player">
                <div class="album-art-container">
                    <img src="img/ä¸€ç¬‘å€¾åŸ-æ±ªè‹æ³·.jpg" alt="Album Art" id="album-art-img" class="album-art">
                </div>
                <div class="player-controls">
                    <div class="song-info">
                        <div id="cool-song-title">é€‰æ‹©ä¸€é¦–æ­Œ</div>
                        <div id="cool-song-artist">æ±ªè‹æ³·</div>
                    </div>
                    <div class="progress-container">
                        <span id="current-time">0:00</span>
                        <input type="range" id="seek-bar" value="0" step="1">
                        <span id="duration">0:00</span>
                    </div>
                    <div class="buttons">
                        <button id="prev-btn"><i class="fa-solid fa-backward-step"></i></button>
                        <button id="play-pause-btn"><i class="fa-solid fa-play"></i></button>
                        <button id="next-btn"><i class="fa-solid fa-forward-step"></i></button>
                    </div>
                </div>
            </div>
            <div class="lyrics-container">
                <ul id="lyrics-list"></ul>
            </div>
        </div>
    </div>
</section>

<footer>
    <div class="content-wrapper">
        <p>A Special Gift for [å‘¨å‘¨áƒ¦]</p>
        <p>Made with <i class="fa-solid fa-heart beat"></i> by ä½ çš„æœ‹å‹</p>
        <p>&copy; 2025</p>
    </div>
</footer>

<audio id="audio-player"></audio>

<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

<script>
    // JAVASCRIPT CODE - V5.0 EPIC FINAL
    document.addEventListener('DOMContentLoaded', () => {

        // --- Welcome Screen Logic ---
        const welcomeScreen = document.getElementById('welcome-screen');
        const startBtn = document.getElementById('start-journey-btn');
        startBtn.addEventListener('click', () => {
            welcomeScreen.classList.add('hidden');
            document.body.style.overflow = 'auto';
            if(playlist.length > 0) playSong();
        });
        document.body.style.overflow = 'hidden';

        // --- Interactive Particle Background ---
        particlesJS("particles-js", {
            "particles":{"number":{"value":80,"density":{"enable":true,"value_area":800}},"color":{"value":"#ffffff"},"shape":{"type":"circle"},"opacity":{"value":0.5,"random":true},"size":{"value":3,"random":true},"line_linked":{"enable":true,"distance":150,"color":"#ffffff","opacity":0.4,"width":1},"move":{"enable":true,"speed":2,"direction":"none","random":false,"straight":false,"out_mode":"out","bounce":false}},
            "interactivity":{"detect_on":"canvas","events":{"onhover":{"enable":true,"mode":"grab"},"onclick":{"enable":true,"mode":"push"},"resize":true},"modes":{"grab":{"distance":140,"line_linked":{"opacity":1}},"bubble":{"distance":400,"size":40,"duration":2,"opacity":8,"speed":3},"repulse":{"distance":200,"duration":0.4},"push":{"particles_nb":4},"remove":{"particles_nb":2}}},"retina_detect":true
        });

        // --- On-Scroll Reveal & Typing Animation ---
        const typingTitle = document.getElementById('typing-title');
        const textToType = "For You & For Us";
        const revealObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    // Trigger typing animation for the specific title
                    if (entry.target.id === 'typing-title' && !entry.target.dataset.typed) {
                        typeWriter(entry.target, textToType, 100);
                        entry.target.dataset.typed = "true";
                    }
                }
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));

        function typeWriter(element, text, speed) {
            let i = 0;
            element.innerHTML = ""; // Clear content
            const cursor = document.createElement('span');
            cursor.className = 'cursor';
            element.appendChild(cursor);

            function type() {
                if (i < text.length) {
                    element.insertBefore(document.createTextNode(text.charAt(i)), cursor);
                    i++;
                    setTimeout(type, speed);
                }
            }
            type();
        }

        // --- Navbar Active State on Scroll ---
        const sections = document.querySelectorAll('section, header');
        const navLinks = document.querySelectorAll('.nav-link');
        window.addEventListener('scroll', () => {
            let current = 'home';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (pageYOffset >= sectionTop - 70) { current = section.getAttribute('id'); }
            });
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href').includes(current)) { link.classList.add('active'); }
            });
        });

        // --- 3D Tilt Effect on Card ---
        const sulongCard = document.getElementById('sulong-zone');
        sulongCard.addEventListener('mousemove', (e) => {
            const { left, top, width, height } = sulongCard.getBoundingClientRect();
            const x = e.clientX - left - width / 2;
            const y = e.clientY - top - height / 2;
            const rotateX = -y / 20;
            const rotateY = x / 20;
            sulongCard.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
        });
        sulongCard.addEventListener('mouseleave', () => {
            sulongCard.style.transform = 'rotateX(0) rotateY(0)';
        });

        // --- Cool Music Player & LRC Logic ---
        const audioPlayer = document.getElementById('audio-player');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const seekBar = document.getElementById('seek-bar');
        const currentTimeEl = document.getElementById('current-time');
        const durationEl = document.getElementById('duration');
        const albumArtImg = document.getElementById('album-art-img');
        const songTitleEl = document.getElementById('cool-song-title');
        const lyricsList = document.getElementById('lyrics-list');

        const playlist = [
            { title: "ä¸€ç¬‘å€¾åŸ", artist: "æ±ªè‹æ³·", src: "music/ä¸€ç¬‘å€¾åŸ-æ±ªè‹æ³·.mp3", albumArt: "img/ä¸€ç¬‘å€¾åŸ-æ±ªè‹æ³·.jpg", lrcSrc: "gc/ä¸€ç¬‘å€¾åŸ-æ±ªè‹æ³·.lrc" },
            { title: "é»‘æ¢¦", artist: "æ±ªè‹æ³·", src: "music/é»‘æ¢¦-æ±ªè‹æ³·.mp3", albumArt: "img/é»‘æ¢¦-æ±ªè‹æ³·.jpg", lrcSrc: "gc/é»‘æ¢¦-æ±ªè‹æ³·.lrc" },
            { title: "å¹´è½®", artist: "æ±ªè‹æ³·", src: "music/å¹´è½®-æ±ªè‹æ³·.mp3", albumArt: "img/å¹´è½®-æ±ªè‹æ³·.jpg", lrcSrc: "gc/å¹´è½®-æ±ªè‹æ³·.lrc" }
        ];

        let currentSongIndex = 0;
        let isPlaying = false;
        let currentLyrics = [];
        let currentLyricIndex = 0;

        function parseLRC(lrcContent) {
            const lines = lrcContent.split('\n');
            const lyrics = [];
            const timeRegex = /\[(\d{2}):(\d{2})[.:](\d{2,3})\]/;
            for (const line of lines) {
                if (line.startsWith('[')) {
                    const match = timeRegex.exec(line);
                    if (match) {
                        const minutes = parseInt(match[1], 10);
                        const seconds = parseInt(match[2], 10);
                        const milliseconds = parseInt(match[3].padEnd(3, '0'), 10);
                        const time = minutes * 60 + seconds + milliseconds / 1000;
                        const text = line.replace(timeRegex, '').trim();
                        if (text) { lyrics.push({ time, text }); }
                    }
                }
            }
            return lyrics;
        }

        async function loadLyrics(lrcPath) {
            try {
                const response = await fetch(lrcPath);
                if (!response.ok) throw new Error('Lyric file not found');
                const lrcText = await response.text();
                currentLyrics = parseLRC(lrcText);
                lyricsList.innerHTML = '';
                currentLyrics.forEach(lyric => {
                    const li = document.createElement('li');
                    li.textContent = lyric.text;
                    lyricsList.appendChild(li);
                });
                currentLyricIndex = -1;
            } catch (error) {
                console.error("Could not load lyrics:", error);
                lyricsList.innerHTML = '<li>æš‚æ— æ­Œè¯</li>';
                lyricsList.style.transform = 'translateY(0)';
                currentLyrics = [];
            }
        }

        function updateLyrics() {
            if (!currentLyrics.length) return;
            const currentTime = audioPlayer.currentTime;
            let newLyricIndex = -1;
            for(let i = 0; i < currentLyrics.length; i++){
                if(currentTime >= currentLyrics[i].time){
                    newLyricIndex = i;
                } else {
                    break;
                }
            }

            if (newLyricIndex !== -1 && newLyricIndex !== currentLyricIndex) {
                const allLi = lyricsList.querySelectorAll('li');
                if (currentLyricIndex !== -1 && allLi[currentLyricIndex]) {
                    allLi[currentLyricIndex].classList.remove('active');
                }
                if(allLi[newLyricIndex]){
                    allLi[newLyricIndex].classList.add('active');
                    currentLyricIndex = newLyricIndex;
                    const activeLi = allLi[newLyricIndex];
                    const listContainer = document.querySelector('.lyrics-container');
                    const scrollOffset = activeLi.offsetTop - listContainer.clientHeight / 2 + activeLi.clientHeight / 2;
                    lyricsList.style.transform = `translateY(-${scrollOffset}px)`;
                }
            }
        }

        function loadSong(song) {
            songTitleEl.textContent = song.title;
            albumArtImg.src = song.albumArt;
            audioPlayer.src = song.src;
            loadLyrics(song.lrcSrc);
            audioPlayer.addEventListener('loadedmetadata', () => {
                durationEl.textContent = formatTime(audioPlayer.duration);
                seekBar.max = audioPlayer.duration;
            });
        }

        function playSong() { isPlaying = true; albumArtImg.classList.add('playing'); playPauseBtn.innerHTML = '<i class="fa-solid fa-pause"></i>'; audioPlayer.play(); }
        function pauseSong() { isPlaying = false; albumArtImg.classList.remove('playing'); playPauseBtn.innerHTML = '<i class="fa-solid fa-play"></i>'; audioPlayer.pause(); }
        function prevSong() { currentSongIndex = (currentSongIndex - 1 + playlist.length) % playlist.length; loadSong(playlist[currentSongIndex]); if(isPlaying) playSong(); }
        function nextSong() { currentSongIndex = (currentSongIndex + 1) % playlist.length; loadSong(playlist[currentSongIndex]); if(isPlaying) playSong(); }
        function updateProgress() { if (audioPlayer.duration) { seekBar.value = audioPlayer.currentTime; currentTimeEl.textContent = formatTime(audioPlayer.currentTime); updateLyrics(); } }
        function formatTime(seconds) { const minutes = Math.floor(seconds / 60); const secs = Math.floor(seconds % 60); return `${minutes}:${secs < 10 ? '0' : ''}${secs}`; }

        playPauseBtn.addEventListener('click', () => (isPlaying ? pauseSong() : playSong()));
        prevBtn.addEventListener('click', prevSong);
        nextBtn.addEventListener('click', nextSong);
        audioPlayer.addEventListener('timeupdate', updateProgress);
        audioPlayer.addEventListener('ended', nextSong);
        seekBar.addEventListener('input', () => { audioPlayer.currentTime = seekBar.value; });

        if (playlist.length > 0) loadSong(playlist[currentSongIndex]);
    });
</script>
</body>
</html>